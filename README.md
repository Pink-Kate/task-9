# Скрапер для quotes.toscrape.com

Цей проект виконує скрапінг сайту http://quotes.toscrape.com з використанням бібліотеки BeautifulSoup та створює базу даних з отриманими даними.

## Встановлення залежностей

```bash
pip install -r requirements.txt
```

## Структура проекту

- `scraper.py` - основний скрапер для отримання даних з сайту
- `database_loader.py` - скрипт для завантаження JSON файлів у базу даних
- `quotes_manager.py` - скрипт для роботи з базою даних (аналог попереднього домашнього завдання)
- `quotes.json` - файл з цитатами
- `authors.json` - файл з інформацією про авторів
- `quotes.db` - SQLite база даних
- `exported_quotes_data.json` - експортовані дані з бази

## Запуск скрапера

```bash
python scraper.py
```

Після виконання будуть створені файли `quotes.json` та `authors.json`.

## Конвертація для попереднього домашнього завдання

```bash
python convert_structure.py
```

Створить файли з структурою, сумісною з попереднім домашнім завданням:
- `quotes_converted.json` (поле `quote` замість `text`)
- `authors_converted.json` (поле `fullname` замість `name`)

## Завантаження даних у базу даних

```bash
python database_loader.py
```

Створить SQLite базу даних `quotes.db` з таблицями:
- `authors` - інформація про авторів
- `quotes` - цитати
- `tags` - теги
- `quote_tags` - зв'язок цитат і тегів

## Робота з базою даних

```bash
python quotes_manager.py
```

Демонструє різні функції роботи з базою даних:
- Отримання всіх цитат з авторами та тегами
- Пошук цитат за автором
- Пошук цитат за тегом
- Статистика по авторах
- Топ теги
- Експорт даних у JSON

## Структура даних

### Оригінальні файли (для поточного завдання)

#### quotes.json
```json
[
  {
    "text": "Текст цитати",
    "author": "Ім'я автора",
    "tags": ["тег1", "тег2", "тег3"]
  }
]
```

#### authors.json
```json
[
  {
    "name": "Ім'я автора",
    "born_date": "Дата народження",
    "born_location": "Місце народження",
    "description": "Опис автора"
  }
]
```

### Конвертовані файли (для попереднього домашнього завдання)

#### quotes_converted.json
```json
[
  {
    "quote": "Текст цитати",
    "author": "Ім'я автора",
    "tags": ["тег1", "тег2", "тег3"]
  }
]
```

#### authors_converted.json
```json
[
  {
    "fullname": "Ім'я автора",
    "born_date": "Дата народження",
    "born_location": "Місце народження",
    "description": "Опис автора"
  }
]
```

## Результати скрапінгу

- **100 цитат** з 10 сторінок сайту
- **50 авторів** з детальною інформацією
- **137 унікальних тегів**

## Статистика бази даних

- Найпопулярніший автор: Albert Einstein (10 цитат)
- Найпопулярніший тег: love (14 використань)
- Найбільше надихаючих цитат: 13

## Особливості

- Скрапер автоматично обходить всі сторінки сайту
- Включає затримки між запитами для уникнення перевантаження сервера
- Обробляє помилки мережі та відсутні сторінки
- Зберігає дані у UTF-8 кодуванні
- Повна сумісність з попереднім домашнім завданням
- Нормалізована структура бази даних з зв'язками між таблицями

## Функції бази даних

- Пошук цитат за автором
- Пошук цитат за тегом
- Статистика по авторах
- Топ теги за популярністю
- Експорт даних у JSON формат
- Повна сумісність з попередніми скриптами 